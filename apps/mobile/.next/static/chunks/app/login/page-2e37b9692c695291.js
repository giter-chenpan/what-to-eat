(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1574:function(e,t,r){Promise.resolve().then(r.bind(r,5846))},9534:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a,n,s=r(5211);(a=n||(n={})).Json="application/json",a.FormData="multipart/form-data",a.UrlEncoded="application/x-www-form-urlencoded",a.Text="text/plain";class o{mergeRequestParams(e,t){let r=e.method||t&&t.method;return{...this.instance.defaults,...e,...t||{},headers:{...r&&this.instance.defaults.headers[r.toLowerCase()]||{},...e.headers||{},...t&&t.headers||{}}}}stringifyFormItem(e){return"object"==typeof e&&null!==e?JSON.stringify(e):"".concat(e)}createFormData(e){return e instanceof FormData?e:Object.keys(e||{}).reduce((t,r)=>{let a=e[r];for(let e of a instanceof Array?a:[a]){let a=e instanceof Blob||e instanceof File;t.append(r,a?e:this.stringifyFormItem(e))}return t},new FormData)}constructor({securityWorker:e,secure:t,format:r,...a}={}){this.securityData=null,this.setSecurityData=e=>{this.securityData=e},this.request=async e=>{let{secure:t,path:r,type:a,query:n,format:s,body:o,...i}=e,l=("boolean"==typeof t?t:this.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},u=this.mergeRequestParams(i,l),c=s||this.format||void 0;return"multipart/form-data"===a&&o&&null!==o&&"object"==typeof o&&(o=this.createFormData(o)),"text/plain"===a&&o&&null!==o&&"string"!=typeof o&&(o=JSON.stringify(o)),this.instance.request({...u,headers:{...u.headers||{},...a?{"Content-Type":a}:{}},params:n,responseType:c,data:o,url:r})},this.instance=s.Z.create({...a,baseURL:a.baseURL||""}),this.secure=t,this.format=r,this.securityWorker=e}}class i extends o{constructor(...e){var t;super(...e),t=this,this.home=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.request({path:"/",method:"GET",...e})},this.anon={authLogin:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/anon/login",method:"POST",body:e,type:"application/json",format:"json",...r})},authRegister:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/anon/register",method:"POST",body:e,type:"application/json",format:"json",...r})}},this.api={authGetUserInfo:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.request({path:"/api/getuserinfo",method:"GET",secure:!0,format:"json",...e})},apiCategoryImportCategory:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/category/import",method:"POST",body:e,secure:!0,type:"multipart/form-data",format:"json",...r})},apiCategoryGetCategory:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/category",method:"GET",query:e,secure:!0,format:"json",...r})},apiCategoryDeleteCategory:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/category/delete",method:"DELETE",query:e,secure:!0,format:"json",...r})},apiDishesSaveDishes:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/dishes/save",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...r})},apiDishesFindPage:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/dishes/findpage",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...r})},apiDishesGetRandomDishes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.request({path:"/api/dishes/random",method:"GET",secure:!0,format:"json",...e})},apiFileUploadFile:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/file/uploadimage",method:"POST",body:e,secure:!0,type:"multipart/form-data",format:"json",...r})},apiFileGetImage:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.request({path:"/api/file/getimage",method:"GET",query:e,format:"json",...r})}}}}var l=r(724);let u=new i({timeout:1e5});u.instance.interceptors.request.use(function(e){return e.headers.Authorization=localStorage.getItem("token"),e},function(e){return Promise.reject(e)}),u.instance.interceptors.response.use(function(e){return"success"!==e.data.code?(l.FN.show({content:e.data.msg||"请求失败",icon:"fail"}),Promise.reject(e)):e.data},function(e){return 401===e.status&&window.location.replace("/login"),Promise.reject(e)});var c=u},5846:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(9075),n=r(511),s=r(724),o=r(9534),i=r(5095);function l(){let[e]=s.l0.useForm(),t=(0,i.useRouter)(),[r,l]=(0,n.useState)(!1),u=async()=>{let r=await e.validateFields(),a=await o.Z.anon.authLogin({...r});localStorage.setItem("token",null==a?void 0:a.token),s.FN.show({content:"登录成功",icon:"success",afterClose:()=>{t.replace("/nav/home")}})},c=async()=>{let t=await e.validateFields();await o.Z.anon.authRegister({...t}),s.FN.show({content:"注册成功, 请登录",icon:"success"}),l(!1)};return(0,a.jsxs)("div",{className:"flex flex-col  items-center h-full text-black pt-40 px-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:"登录"}),(0,a.jsxs)(s.l0,{form:e,layout:"horizontal",className:" py-4 px-0 w-full",children:[(0,a.jsx)(s.l0.Item,{name:"name",label:"用户名",rules:[{required:!0}],children:(0,a.jsx)(s.II,{placeholder:"请输入用户名"})}),(0,a.jsx)(s.l0.Item,{name:"pwd",label:"密码",rules:[{required:!0,message:"请输入密码"}],children:(0,a.jsx)(s.II,{placeholder:"请输入密码",type:"password"})})]}),r?(0,a.jsxs)("div",{className:"w-full mt-8 flex justify-between",children:[(0,a.jsx)(s.zx,{onClick:()=>l(!1),size:"large",className:"w-1/5",children:"返回"}),(0,a.jsx)(s.zx,{color:"primary",size:"large",className:"w-4/5",style:{marginLeft:"10px"},onClick:c,children:"注册"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-8 w-full",children:(0,a.jsx)(s.zx,{color:"primary",block:!0,size:"large",onClick:u,children:"登录"})}),(0,a.jsx)("div",{className:"mt-8 w-full",children:(0,a.jsx)(s.zx,{color:"primary",block:!0,size:"large",fill:"none",onClick:()=>l(!0),children:"注册"})})]})]})}},5095:function(e,t,r){"use strict";var a=r(7353);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[724,211,852,999,744],function(){return e(e.s=1574)}),_N_E=e.O()}]);