(()=>{var e={};e.id=650,e.ids=[650],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},9902:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>c,routeModule:()=>d,tree:()=>l});var r=s(8090),i=s(9409),a=s(1522),o=s.n(a),n=s(1305),u={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>n[e]);s.d(t,u);let l=["",{children:["dishes",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1010)),"/Users/chenpan/Documents/doc/my-project/what-to-eat/apps/mobile/app/dishes/add/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,5543))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,7776)),"/Users/chenpan/Documents/doc/my-project/what-to-eat/apps/mobile/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,111,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,5543))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/chenpan/Documents/doc/my-project/what-to-eat/apps/mobile/app/dishes/add/page.tsx"],h="/dishes/add/page",p={require:s,loadChunk:()=>Promise.resolve()},d=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dishes/add/page",pathname:"/dishes/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6219:(e,t,s)=>{Promise.resolve().then(s.bind(s,6199))},3101:(e,t,s)=>{Promise.resolve().then(s.bind(s,2834))},2516:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,1170,23)),Promise.resolve().then(s.t.bind(s,3082,23)),Promise.resolve().then(s.t.bind(s,6181,23)),Promise.resolve().then(s.t.bind(s,5381,23)),Promise.resolve().then(s.t.bind(s,6205,23)),Promise.resolve().then(s.t.bind(s,4266,23))},4569:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var r,i=s(4222);!function(e){e.Json="application/json",e.FormData="multipart/form-data",e.UrlEncoded="application/x-www-form-urlencoded",e.Text="text/plain"}(r||(r={}));class a{constructor({securityWorker:e,secure:t,format:s,...r}={}){this.securityData=null,this.setSecurityData=e=>{this.securityData=e},this.request=async({secure:e,path:t,type:s,query:r,format:i,body:a,...o})=>{let n=("boolean"==typeof e?e:this.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},u=this.mergeRequestParams(o,n),l=i||this.format||void 0;return"multipart/form-data"===s&&a&&null!==a&&"object"==typeof a&&(a=this.createFormData(a)),"text/plain"===s&&a&&null!==a&&"string"!=typeof a&&(a=JSON.stringify(a)),this.instance.request({...u,headers:{...u.headers||{},...s?{"Content-Type":s}:{}},params:r,responseType:l,data:a,url:t})},this.instance=i.Z.create({...r,baseURL:r.baseURL||""}),this.secure=t,this.format=s,this.securityWorker=e}mergeRequestParams(e,t){let s=e.method||t&&t.method;return{...this.instance.defaults,...e,...t||{},headers:{...s&&this.instance.defaults.headers[s.toLowerCase()]||{},...e.headers||{},...t&&t.headers||{}}}}stringifyFormItem(e){return"object"==typeof e&&null!==e?JSON.stringify(e):`${e}`}createFormData(e){return e instanceof FormData?e:Object.keys(e||{}).reduce((t,s)=>{let r=e[s];for(let e of r instanceof Array?r:[r]){let r=e instanceof Blob||e instanceof File;t.append(s,r?e:this.stringifyFormItem(e))}return t},new FormData)}}class o extends a{constructor(...e){super(...e),this.home=(e={})=>this.request({path:"/",method:"GET",...e}),this.anon={authLogin:(e,t={})=>this.request({path:"/anon/login",method:"POST",body:e,type:"application/json",format:"json",...t}),authRegister:(e,t={})=>this.request({path:"/anon/register",method:"POST",body:e,type:"application/json",format:"json",...t})},this.api={authGetUserInfo:(e={})=>this.request({path:"/api/getuserinfo",method:"GET",secure:!0,format:"json",...e}),apiCategoryImportCategory:(e,t={})=>this.request({path:"/api/category/import",method:"POST",body:e,secure:!0,type:"multipart/form-data",format:"json",...t}),apiCategoryGetCategory:(e,t={})=>this.request({path:"/api/category",method:"GET",query:e,secure:!0,format:"json",...t}),apiCategoryDeleteCategory:(e,t={})=>this.request({path:"/api/category/delete",method:"DELETE",query:e,secure:!0,format:"json",...t}),apiDishesSaveDishes:(e,t={})=>this.request({path:"/api/dishes/save",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiDishesFindPage:(e,t={})=>this.request({path:"/api/dishes/findpage",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiDishesGetRandomDishes:(e={})=>this.request({path:"/api/dishes/random",method:"GET",secure:!0,format:"json",...e}),apiFileUploadFile:(e,t={})=>this.request({path:"/api/file/uploadimage",method:"POST",body:e,secure:!0,type:"multipart/form-data",format:"json",...t}),apiFileGetImage:(e,t={})=>this.request({path:"/api/file/getimage",method:"GET",query:e,format:"json",...t})}}}var n=s(1928);let u=new o({timeout:1e3});u.instance.interceptors.request.use(function(e){return e.headers.Authorization=localStorage.getItem("token"),e},function(e){return Promise.reject(e)}),u.instance.interceptors.response.use(function(e){return"success"!==e.data.code?(n.FN.show({content:e.data.msg||"请求失败",icon:"fail"}),Promise.reject(e)):e.data},function(e){return 401===e.status&&window.location.replace("/login"),Promise.reject(e)});let l=u},6199:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(4297),i=s(1928),a=s(840),o=s(5803),n=s(9646),u=s(9052),l=s(1838),c=s(5757),h=class extends l.l{#e;#t;#s;#r;constructor(e,t){super(),this.#t=void 0,this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,c.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,c.Ym)(t.mutationKey)!==(0,c.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,n.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){u.V.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context;e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s),this.#r.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s),this.#r.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#t)})})}},p=s(8121),d=s(7787);function m(e,t){let s=(0,p.NL)(t),[r]=o.useState(()=>new h(s,e));o.useEffect(()=>{r.setOptions(e)},[r,e]);let i=o.useSyncExternalStore(o.useCallback(e=>r.subscribe(u.V.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=o.useCallback((e,t)=>{r.mutate(e,t).catch(d.Z)},[r]);if(i.error&&(0,d.L)(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}var y=s(4569),f=s(3776);function g(){let[e]=i.l0.useForm(),t=(0,f.useRouter)(),{data:s}=(0,a.a)({queryKey:["dishesCategoryList"],queryFn:()=>y.Z.api.apiCategoryGetCategory(),select:e=>e.data.map(e=>({label:e.name,value:e.id}))}),o=m({mutationFn:async e=>(console.log(e),(await y.Z.api.apiFileUploadFile({file:e})).data)}),n=m({mutationFn:async()=>{let{categoryId:s,images:r,...a}=await e.validateFields();await y.Z.api.apiDishesSaveDishes({...a,category_id:s?.[0].toString(),view_id:r?.[0].id.toString()}),i.FN.show({content:"添加成功!",afterClose:()=>t.back()})}});return(0,r.jsxs)("div",{className:"h-full dishes-page px-5 py-5 relative",children:[(0,r.jsxs)(i.l0,{form:e,style:{"--border-bottom":"unset"},layout:"horizontal",children:[r.jsx(i.l0.Item,{name:"name",label:"菜谱名称",layout:"horizontal",childElementPosition:"right",children:r.jsx(i.II,{placeholder:"请输入菜谱名称"})}),r.jsx(i.l0.Item,{name:"categoryId",childElementPosition:"right",label:"分类",trigger:"onConfirm",onClick:(e,t)=>{t.current?.open()},children:r.jsx(i.cW,{columns:[s],children:e=>e.length?e[0]?.label:"请选择"})}),r.jsx(i.l0.Item,{name:"images",label:"图片",children:r.jsx(i.wA,{upload:async e=>await o.mutateAsync(e),maxCount:1})}),r.jsx(i.l0.Item,{name:"desc",label:"菜谱描述",children:r.jsx(i.II,{placeholder:"请输入菜谱描述"})})]}),r.jsx("div",{className:"mt-5 absolute w-full px-5 left-0 bottom-6",children:r.jsx(i.zx,{color:"primary",block:!0,onClick:()=>n.mutate(),children:"保存"})})]})}},2834:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(4297),i=s(6829),a=s(8121),o=s(3746);function n({children:e}){let t=new i.S;return(0,r.jsxs)(a.aH,{client:t,children:[e,r.jsx(o.t,{})]})}},1010:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>o});let r=(0,s(7460).createProxy)(String.raw`/Users/chenpan/Documents/doc/my-project/what-to-eat/apps/mobile/app/dishes/add/page.tsx`),{__esModule:i,$$typeof:a}=r,o=r.default},7776:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>u});var r=s(1002);s(1005);let i=(0,s(7460).createProxy)(String.raw`/Users/chenpan/Documents/doc/my-project/what-to-eat/apps/mobile/app/povider.tsx`),{__esModule:a,$$typeof:o}=i,n=i.default,u={title:"what to eat",description:"what to eat"};function l({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(n,{children:e})})})}},5543:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(1218);let i=e=>[{type:"image/x-icon",sizes:"351x392",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},1005:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[150,356,617,629,840],()=>s(9902));module.exports=r})();