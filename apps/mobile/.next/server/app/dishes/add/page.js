(()=>{var t={};t.id=650,t.ids=[650],t.modules={7849:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external")},2934:t=>{"use strict";t.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external")},4580:t=>{"use strict";t.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:t=>{"use strict";t.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:t=>{"use strict";t.exports=require("assert")},2361:t=>{"use strict";t.exports=require("events")},7147:t=>{"use strict";t.exports=require("fs")},3685:t=>{"use strict";t.exports=require("http")},5687:t=>{"use strict";t.exports=require("https")},2037:t=>{"use strict";t.exports=require("os")},1017:t=>{"use strict";t.exports=require("path")},2781:t=>{"use strict";t.exports=require("stream")},6224:t=>{"use strict";t.exports=require("tty")},7310:t=>{"use strict";t.exports=require("url")},3837:t=>{"use strict";t.exports=require("util")},9796:t=>{"use strict";t.exports=require("zlib")},1385:(t,e,s)=>{"use strict";s.r(e),s.d(e,{GlobalError:()=>o.a,__next_app__:()=>d,originalPathname:()=>h,pages:()=>c,routeModule:()=>p,tree:()=>l});var r=s(8090),i=s(9409),a=s(1522),o=s.n(a),n=s(1305),u={};for(let t in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(t)&&(u[t]=()=>n[t]);s.d(e,u);let l=["",{children:["dishes",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1010)),"/www/what-to-eat/apps/mobile/app/dishes/add/page.tsx"]}]},{}]},{metadata:{icon:[async t=>(await Promise.resolve().then(s.bind(s,5543))).default(t)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,7776)),"/www/what-to-eat/apps/mobile/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,111,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async t=>(await Promise.resolve().then(s.bind(s,5543))).default(t)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/www/what-to-eat/apps/mobile/app/dishes/add/page.tsx"],h="/dishes/add/page",d={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/dishes/add/page",pathname:"/dishes/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},6986:(t,e,s)=>{Promise.resolve().then(s.bind(s,6199))},2905:(t,e,s)=>{Promise.resolve().then(s.bind(s,2834))},7892:(t,e,s)=>{Promise.resolve().then(s.t.bind(s,1170,23)),Promise.resolve().then(s.t.bind(s,3082,23)),Promise.resolve().then(s.t.bind(s,6181,23)),Promise.resolve().then(s.t.bind(s,5381,23)),Promise.resolve().then(s.t.bind(s,6205,23)),Promise.resolve().then(s.t.bind(s,4266,23))},4569:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var r,i=s(4222);!function(t){t.Json="application/json",t.FormData="multipart/form-data",t.UrlEncoded="application/x-www-form-urlencoded",t.Text="text/plain"}(r||(r={}));class a{constructor({securityWorker:t,secure:e,format:s,...r}={}){this.securityData=null,this.setSecurityData=t=>{this.securityData=t},this.request=async({secure:t,path:e,type:s,query:r,format:i,body:a,...o})=>{let n=("boolean"==typeof t?t:this.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},u=this.mergeRequestParams(o,n),l=i||this.format||void 0;return"multipart/form-data"===s&&a&&null!==a&&"object"==typeof a&&(a=this.createFormData(a)),"text/plain"===s&&a&&null!==a&&"string"!=typeof a&&(a=JSON.stringify(a)),this.instance.request({...u,headers:{...u.headers||{},...s?{"Content-Type":s}:{}},params:r,responseType:l,data:a,url:e})},this.instance=i.Z.create({...r,baseURL:r.baseURL||""}),this.secure=e,this.format=s,this.securityWorker=t}mergeRequestParams(t,e){let s=t.method||e&&e.method;return{...this.instance.defaults,...t,...e||{},headers:{...s&&this.instance.defaults.headers[s.toLowerCase()]||{},...t.headers||{},...e&&e.headers||{}}}}stringifyFormItem(t){return"object"==typeof t&&null!==t?JSON.stringify(t):`${t}`}createFormData(t){return t instanceof FormData?t:Object.keys(t||{}).reduce((e,s)=>{let r=t[s];for(let t of r instanceof Array?r:[r]){let r=t instanceof Blob||t instanceof File;e.append(s,r?t:this.stringifyFormItem(t))}return e},new FormData)}}class o extends a{constructor(...t){super(...t),this.home=(t={})=>this.request({path:"/",method:"GET",...t}),this.anon={authLogin:(t,e={})=>this.request({path:"/anon/login",method:"POST",body:t,type:"application/json",format:"json",...e}),authRegister:(t,e={})=>this.request({path:"/anon/register",method:"POST",body:t,type:"application/json",format:"json",...e})},this.api={authGetUserInfo:(t={})=>this.request({path:"/api/getuserinfo",method:"GET",secure:!0,format:"json",...t}),apiCategoryImportCategory:(t,e={})=>this.request({path:"/api/category/import",method:"POST",body:t,secure:!0,type:"multipart/form-data",format:"json",...e}),apiCategoryGetCategory:(t,e={})=>this.request({path:"/api/category",method:"GET",query:t,secure:!0,format:"json",...e}),apiCategoryDeleteCategory:(t,e={})=>this.request({path:"/api/category/delete",method:"DELETE",query:t,secure:!0,format:"json",...e}),apiDishesSaveDishes:(t,e={})=>this.request({path:"/api/dishes/save",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...e}),apiDishesFindPage:(t,e={})=>this.request({path:"/api/dishes/findpage",method:"POST",body:t,secure:!0,type:"application/json",format:"json",...e}),apiDishesGetRandomDishes:(t={})=>this.request({path:"/api/dishes/random",method:"GET",secure:!0,format:"json",...t}),apiFileUploadFile:(t,e={})=>this.request({path:"/api/file/uploadimage",method:"POST",body:t,secure:!0,type:"multipart/form-data",format:"json",...e}),apiFileGetImage:(t,e={})=>this.request({path:"/api/file/getimage",method:"GET",query:t,format:"json",...e})}}}var n=s(1928);let u=new o({timeout:1e5});u.instance.interceptors.request.use(function(t){return t.headers.Authorization=localStorage.getItem("token"),t},function(t){return Promise.reject(t)}),u.instance.interceptors.response.use(function(t){return"success"!==t.data.code?(n.FN.show({content:t.data.msg||"请求失败",icon:"fail"}),Promise.reject(t)):t.data},function(t){return 401===t.status&&window.location.replace("/login"),Promise.reject(t)});let l=u},6199:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>g});var r=s(4297),i=s(1928),a=s(840),o=s(5803),n=s(9646),u=s(9052),l=s(1838),c=s(5757),h=class extends l.l{#t;#e;#s;#r;constructor(t,e){super(),this.#e=void 0,this.#t=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,c.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,c.Ym)(e.mutationKey)!==(0,c.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(t,e){return this.#r=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#i(){let t=this.#s?.state??(0,n.R)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#a(t){u.V.batch(()=>{if(this.#r&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context;t?.type==="success"?(this.#r.onSuccess?.(t.data,e,s),this.#r.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#r.onError?.(t.error,e,s),this.#r.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#e)})})}},d=s(8121),p=s(7787);function m(t,e){let s=(0,d.NL)(e),[r]=o.useState(()=>new h(s,t));o.useEffect(()=>{r.setOptions(t)},[r,t]);let i=o.useSyncExternalStore(o.useCallback(t=>r.subscribe(u.V.batchCalls(t)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=o.useCallback((t,e)=>{r.mutate(t,e).catch(p.Z)},[r]);if(i.error&&(0,p.L)(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}var y=s(4569),f=s(3776);function g(){let[t]=i.l0.useForm(),e=(0,f.useRouter)(),{data:s}=(0,a.a)({queryKey:["dishesCategoryList"],queryFn:()=>y.Z.api.apiCategoryGetCategory(),select:t=>t.data.map(t=>({label:t.name,value:t.id}))}),o=m({mutationFn:async t=>(console.log(t),(await y.Z.api.apiFileUploadFile({file:t})).data)}),n=m({mutationFn:async()=>{let{categoryId:s,images:r,...a}=await t.validateFields();await y.Z.api.apiDishesSaveDishes({...a,category_id:s?.[0].toString(),view_id:r?.[0].id.toString()}),i.FN.show({content:"添加成功!",afterClose:()=>e.back()})}});return(0,r.jsxs)("div",{className:"h-full dishes-page px-5 py-5 relative",children:[(0,r.jsxs)(i.l0,{form:t,style:{"--border-bottom":"unset"},layout:"horizontal",children:[r.jsx(i.l0.Item,{name:"name",label:"菜谱名称",layout:"horizontal",childElementPosition:"right",children:r.jsx(i.II,{placeholder:"请输入菜谱名称"})}),r.jsx(i.l0.Item,{name:"categoryId",childElementPosition:"right",label:"分类",trigger:"onConfirm",onClick:(t,e)=>{e.current?.open()},children:r.jsx(i.cW,{columns:[s],children:t=>t.length?t[0]?.label:"请选择"})}),r.jsx(i.l0.Item,{name:"images",label:"图片",children:r.jsx(i.wA,{upload:async t=>await o.mutateAsync(t),maxCount:1})}),r.jsx(i.l0.Item,{name:"desc",label:"菜谱描述",children:r.jsx(i.II,{placeholder:"请输入菜谱描述"})})]}),r.jsx("div",{className:"mt-5 absolute w-full px-5 left-0 bottom-6",children:r.jsx(i.zx,{color:"primary",block:!0,onClick:()=>n.mutate(),children:"保存"})})]})}},2834:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});var r=s(4297),i=s(6829),a=s(8121),o=s(3746);function n({children:t}){let e=new i.S;return(0,r.jsxs)(a.aH,{client:e,children:[t,r.jsx(o.t,{})]})}},1010:(t,e,s)=>{"use strict";s.r(e),s.d(e,{$$typeof:()=>a,__esModule:()=>i,default:()=>o});let r=(0,s(7460).createProxy)(String.raw`/www/what-to-eat/apps/mobile/app/dishes/add/page.tsx`),{__esModule:i,$$typeof:a}=r,o=r.default},7776:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>l,metadata:()=>u});var r=s(1002);s(1005);let i=(0,s(7460).createProxy)(String.raw`/www/what-to-eat/apps/mobile/app/povider.tsx`),{__esModule:a,$$typeof:o}=i,n=i.default,u={title:"what to eat",description:"what to eat"};function l({children:t}){return r.jsx("html",{lang:"en",children:r.jsx("body",{children:r.jsx(n,{children:t})})})}},5543:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>i});var r=s(1218);let i=t=>[{type:"image/x-icon",sizes:"351x392",url:(0,r.fillMetadataSegment)(".",t.params,"favicon.ico")+""}]},1005:()=>{}};var e=require("../../../webpack-runtime.js");e.C(t);var s=t=>e(e.s=t),r=e.X(0,[150,356,617,629,840],()=>s(1385));module.exports=r})();